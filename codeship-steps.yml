- type: parallel
  tag: '^([1-9]\d*!)?{(0|[1-9]\d*)}(\.{(0|[1-9]\d*)})*((a|b|rc){(0|[1-9]\d*)})?(\.post{(0|[1-9]\d*)})?(\.dev{(0|[1-9]\d*)})?$'
  steps:
  - service: deb
    name: Build Windows installer
    command: /src/installers/windows/build.sh
  - service: deb
    name: Build MacOS installer
    command: /src/installers/osx/build.sh
  - service: el6
    name: Build EL-6
    command: /src/installers/rpm/build.sh 6
  - service: el7
    name: Build EL-7
    command: /src/installers/rpm/build.sh 7
- name: Publish
  tag: '^([1-9]\d*!)?{(0|[1-9]\d*)}(\.{(0|[1-9]\d*)})*((a|b|rc){(0|[1-9]\d*)})?(\.post{(0|[1-9]\d*)})?(\.dev{(0|[1-9]\d*)})?$'
  service: python
  command: python /src/installers/build/publish.py

- name: No Tag
  service: deb
  tag: '^((!^([1-9]\d*!)?{(0|[1-9]\d*)}(\.{(0|[1-9]\d*)})*((a|b|rc){(0|[1-9]\d*)})?(\.post{(0|[1-9]\d*)})?(\.dev{(0|[1-9]\d*)})?$).)*$'
  command: echo "No matching tag.  Not building"

 